!function(){"use strict";var e,t,o=tinymce.util.Tools.resolve("tinymce.PluginManager");let r=0,n=e=>{let t=new Date,o=t.getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++r+String(o)},l=(e,t,o)=>{var r;return!!o(e,t.prototype)||(null===(r=e.constructor)||void 0===r?void 0:r.name)===t.name},a=e=>{let t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&l(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t},i=e=>t=>typeof t===e,d=(e="string",t=>a(t)===e),s=i("boolean"),m=e=>null==e,c=e=>!m(e),u=i("function"),g=i("number"),p=(e,t)=>o=>e(t(o)),h=e=>()=>e,f=(e,t)=>e===t,y=h(!1);class v{constructor(e,t){this.tag=e,this.value=t}static some(e){return new v(!0,e)}static none(){return v.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?v.some(e(this.value)):v.none()}bind(e){return this.tag?e(this.value):v.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:v.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(null!=e?e:"Called getOrDie on None")}static from(e){return c(e)?v.some(e):v.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}v.singletonNone=new v(!1);let $=Array.prototype.indexOf,b=(e,t)=>$.call(e,t),T=(e,t)=>b(e,t)>-1,C=(e,t)=>{let o=e.length,r=Array(o);for(let n=0;n<o;n++){let l=e[n];r[n]=t(l,n)}return r},w=(e,t)=>{for(let o=0,r=e.length;o<r;o++){let n=e[o];t(n,o)}},N=(e,t)=>{let o=[];for(let r=0,n=e.length;r<n;r++){let l=e[r];t(l,r)&&o.push(l)}return o},A=(e,t,o)=>(w(e,(e,r)=>{o=t(o,e,r)}),o),x=Object.keys,S=(e,t)=>{let o=x(e);for(let r=0,n=o.length;r<n;r++){let l=o[r],a=e[l];t(a,l)}};"undefined"!=typeof window?window:Function("return this;")();let _=e=>{let t=e.dom.nodeName;return t.toLowerCase()},D=e=>e.dom.nodeType,k=e=>t=>D(t)===e,E=e=>8===D(e)||"#comment"===_(e),M=k(1),P=k(3),O=k(9),R=k(11),B=(e,t,o)=>{if(d(o)||s(o)||g(o))e.setAttribute(t,o+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",o,":: Element ",e),Error("Attribute value was not simple")},L=(e,t,o)=>{B(e.dom,t,o)},I=(e,t)=>{let o=e.dom;S(t,(e,t)=>{B(o,t,e)})},V=(e,t)=>{let o=e.dom.getAttribute(t);return null===o?void 0:o},j=(e,t)=>v.from(V(e,t)),q=(e,t)=>{e.dom.removeAttribute(t)},F=e=>A(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),H=(e,t)=>{let o=(t||document).createElement("div");if(o.innerHTML=e,!o.hasChildNodes()||o.childNodes.length>1){let r="HTML does not have a single root node";throw console.error(r,e),Error(r)}return U(o.childNodes[0])},K=(e,t)=>{let o=(t||document).createElement(e);return U(o)},z=(e,t)=>{let o=(t||document).createTextNode(e);return U(o)},U=e=>{if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}},Y=(e,t,o)=>v.from(e.dom.elementFromPoint(t,o)).map(U),G={fromHtml:H,fromTag:K,fromText:z,fromDom:U,fromPoint:Y},J=(e,t)=>{let o=e.dom;if(1!==o.nodeType)return!1;{let r=o;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);else if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);else throw Error("Browser lacks native selectors")}},Q=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,W=(e,t)=>{let o=void 0===t?document:t.dom;return Q(o)?[]:C(o.querySelectorAll(e),G.fromDom)},X=(e,t)=>{let o=void 0===t?document:t.dom;return Q(o)?v.none():v.from(o.querySelector(e)).map(G.fromDom)},Z=(e,t)=>e.dom===t.dom,ee=J,et=(e,t,o=f)=>e.exists(e=>o(e,t)),eo=e=>e.replace(/^\s+|\s+$/g,""),er=e=>void 0!==e.style&&u(e.style.getPropertyValue),en=e=>G.fromDom(e.dom.ownerDocument),el=e=>O(e)?e:en(e),ea=e=>v.from(e.dom.parentNode).map(G.fromDom),ei=(e,t)=>{let o=u(t)?t:y,r=e.dom,n=[];for(;null!==r.parentNode&&void 0!==r.parentNode;){let l=r.parentNode,a=G.fromDom(l);if(n.push(a),!0===o(a))break;r=l}return n},ed=e=>v.from(e.dom.previousSibling).map(G.fromDom),es=e=>v.from(e.dom.nextSibling).map(G.fromDom),em=e=>C(e.dom.childNodes,G.fromDom),ec=(e,t)=>{let o=e.dom.childNodes;return v.from(o[t]).map(G.fromDom)},eu=e=>ec(e,0),eg=e=>R(e)&&c(e.dom.host),ep=u(Element.prototype.attachShadow)&&u(Node.prototype.getRootNode),eh=ep?e=>G.fromDom(e.dom.getRootNode()):el,ef=e=>{let t=eh(e);return eg(t)?v.some(t):v.none()},ey=e=>G.fromDom(e.dom.host),ev=e=>{let t=P(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;let o=t.ownerDocument;return ef(G.fromDom(t)).fold(()=>o.body.contains(t),p(ev,ey))},e$=(e,t,o)=>{if(!d(o))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",o,":: Element ",e),Error("CSS value must be a string: "+o);er(e)&&e.style.setProperty(t,o)},eb=(e,t)=>{er(e)&&e.style.removeProperty(t)},eT=(e,t,o)=>{let r=e.dom;e$(r,t,o)},eC=(e,t)=>{let o=e.dom,r=window.getComputedStyle(o),n=r.getPropertyValue(t);return""!==n||ev(e)?n:ew(o,t)},ew=(e,t)=>er(e)?e.style.getPropertyValue(t):"",eN=(e,t)=>{let o=e.dom,r=ew(o,t);return v.from(r).filter(e=>e.length>0)},eA=(e,t)=>{let o=e.dom;eb(o,t),et(j(e,"style").map(eo),"")&&q(e,"style")},ex=(e,t)=>{let o=ea(e);o.each(o=>{o.dom.insertBefore(t.dom,e.dom)})},eS=(e,t)=>{let o=es(e);o.fold(()=>{let o=ea(e);o.each(e=>{eD(e,t)})},e=>{ex(e,t)})},e_=(e,t)=>{let o=eu(e);o.fold(()=>{eD(e,t)},o=>{e.dom.insertBefore(t.dom,o.dom)})},eD=(e,t)=>{e.dom.appendChild(t.dom)},ek=(e,t)=>{ex(e,t),eD(t,e)},eE=(e,t)=>{w(t,(o,r)=>{let n=0===r?e:t[r-1];eS(n,o)})},eM=(e,t)=>{w(t,t=>{eD(e,t)})},eP=(e,t)=>{let o=[];return w(em(e),e=>{t(e)&&(o=o.concat([e])),o=o.concat(eP(e,t))}),o};var eO=(e,t,o,r,n)=>e(o,r)?v.some(o):u(n)&&n(o)?v.none():t(o,r,n);let eR=(e,t,o)=>{let r=e.dom,n=u(o)?o:y;for(;r.parentNode;){r=r.parentNode;let l=G.fromDom(r);if(t(l))return v.some(l);if(n(l))break}return v.none()},eB=e=>{let t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},eL=e=>{let t=em(e);t.length>0&&eE(e,t),eB(e)},e9=(e,t)=>W(t,e),eI=(e,t,o)=>eR(e,e=>J(e,t),o),eV=(e,t)=>X(t,e),ej=(e,t,o)=>{let r=(e,t)=>J(e,t);return eO(r,eI,e,t,o)},eq=((e,t)=>{let o=o=>{if(!e(o))throw Error("Can only get "+t+" value of a "+t+" node");return r(o).getOr("")},r=t=>e(t)?v.from(t.dom.nodeValue):v.none(),n=(o,r)=>{if(!e(o))throw Error("Can only set raw "+t+" value of a "+t+" node");o.dom.nodeValue=r};return{get:o,getOption:r,set:n}})(P,"text"),e0=e=>eq.get(e),e3=(e,t)=>eq.set(e,t);var eF=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];let eH=(e,t)=>({element:e,offset:t}),eK=(e,t,o)=>e.property().isText(t)&&0===e.property().getText(t).trim().length||e.property().isComment(t)?o(t).bind(t=>eK(e,t,o).orThunk(()=>v.some(t))):v.none(),e1=(e,t)=>{if(e.property().isText(t))return e.property().getText(t).length;let o=e.property().children(t);return o.length},e2=(e,t)=>{let o=eK(e,t,e.query().prevSibling).getOr(t);if(e.property().isText(o))return eH(o,e1(e,o));let r=e.property().children(o);return r.length>0?e2(e,r[r.length-1]):eH(o,e1(e,o))},e6=e2,e7=(()=>{let e=e=>G.fromDom(e.dom.cloneNode(!1)),t=e=>!!M(e)&&("body"===_(e)||T(eF,_(e))),o=e=>!!M(e)&&T(["br","img","hr","input"],_(e)),r=e=>M(e)&&"false"===V(e,"contenteditable"),n=(e,t)=>e.dom.compareDocumentPosition(t.dom),l=(e,t)=>{let o=F(e);I(t,o)},a=e=>{let t=_(e);return T(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],t)},i=e=>M(e)?j(e,"lang"):v.none();return{up:h({selector:eI,closest:ej,predicate:eR,all:ei}),down:h({selector:e9,predicate:eP}),styles:h({get:eC,getRaw:eN,set:eT,remove:eA}),attrs:h({get:V,set:L,remove:q,copyTo:l}),insert:h({before:ex,after:eS,afterAll:eE,append:eD,appendAll:eM,prepend:e_,wrap:ek}),remove:h({unwrap:eL,remove:eB}),create:h({nu:G.fromTag,clone:e,text:G.fromText}),query:h({comparePosition:n,prevSibling:ed,nextSibling:es}),property:h({children:em,name:_,parent:ea,document:e=>el(e).dom,isText:P,isComment:E,isElement:M,isSpecial:a,getLanguage:i,getText:e0,setText:e3,isBoundary:t,isEmptyTag:o,isNonEditable:r}),eq:Z,is:ee}})(),ez=e=>e6(e7,e),eU=(e,t,o)=>e.dispatch("ToggledAccordion",{element:t,state:o}),e5=(e,t,o)=>e.dispatch("ToggledAllAccordions",{elements:t,state:o}),eY="details",e4="mce-accordion",e8="mce-accordion-summary",eG="mce-accordion-body";var eJ=tinymce.util.Tools.resolve("tinymce.util.Tools");let eQ=e=>(null==e?void 0:e.nodeName)==="SUMMARY",eW=e=>(null==e?void 0:e.nodeName)==="DETAILS",eX=e=>e.hasAttribute("open"),eZ=e=>{let t=e.selection.getNode();return eQ(t)||Boolean(e.dom.getParent(t,eQ))},te=e=>{let t=e.selection.getRng();return eW(t.startContainer)&&t.collapsed&&0===t.startOffset},tt=e=>!eZ(e)&&e.dom.isEditable(e.selection.getNode()),to=e=>v.from(e.dom.getParent(e.selection.getNode(),eW)),tr=e=>to(e).isSome(),tn=e=>(e.innerHTML='<br data-mce-bogus="1" />',e),tl=e=>tn(e.dom.create("p")),ta=e=>tn(e.dom.create("summary")),ti=(e,t)=>{let o=tl(e);t.insertAdjacentElement("afterend",o),e.selection.setCursorLocation(o,0)},td=(e,t)=>{if(eQ(null==t?void 0:t.lastChild)){let o=tl(e);t.appendChild(o),e.selection.setCursorLocation(o,0)}},ts=(e,t)=>{if(!eQ(null==t?void 0:t.firstChild)){let o=ta(e);t.prepend(o),e.selection.setCursorLocation(o,0)}},tm=e=>t=>{td(e,t),ts(e,t)},tc=e=>{eJ.each(eJ.grep(e.dom.select("details",e.getBody())),tm(e))},tu=e=>{if(!tt(e))return;let t=G.fromDom(e.getBody()),o=n("acc"),r=e.dom.encode(e.selection.getRng().toString()||e.translate("Accordion summary...")),l=e.dom.encode(e.translate("Accordion body...")),a=`<summary class="${e8} flex items-center justify-between w-full cursor-pointer p-5 rtl:text-right text-gray-500 border border-b-1 border-gray-200 focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-800 dark:border-gray-700 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 gap-3 font-bold">${r}</summary>`,i=`<div class="${eG} mce-accordion-body p-5 border border-b-1 border-gray-200 dark:border-gray-700 dark:bg-gray-900"><p>${l}</p></div>`;e.undoManager.transact(()=>{e.insertContent([`<details data-mce-id="${o}" class="${e4}" open="open">`,a,i,"</details>"].join("")),eV(t,`[data-mce-id="${o}"]`).each(t=>{q(t,"data-mce-id"),eV(t,"summary").each(t=>{let o=e.dom.createRng(),r=ez(t);o.setStart(r.element.dom,r.offset),o.setEnd(r.element.dom,r.offset),e.selection.setRng(o)})})})},tg=(e,t)=>{let o=null!=t?t:!eX(e);return o?e.setAttribute("open","open"):e.removeAttribute("open"),o},tp=(e,t)=>{to(e).each(o=>{eU(e,o,tg(o,t))})},th=e=>{to(e).each(t=>{let{nextSibling:o}=t;o?(e.selection.select(o,!0),e.selection.collapse(!0)):ti(e,t),t.remove()})},tf=(e,t)=>{let o=Array.from(e.getBody().querySelectorAll("details"));0!==o.length&&(w(o,e=>tg(e,null!=t?t:!eX(e))),e5(e,o,t))},ty=e=>{e.addCommand("InsertAccordion",()=>tu(e)),e.addCommand("ToggleAccordion",(t,o)=>tp(e,o)),e.addCommand("ToggleAllAccordions",(t,o)=>tf(e,o)),e.addCommand("RemoveAccordion",()=>th(e))};var tv=tinymce.util.Tools.resolve("tinymce.html.Node");let t$=e=>{var t,o;return null!==(o=null===(t=e.attr("class"))||void 0===t?void 0:t.split(" "))&&void 0!==o?o:[]},tb=(e,t)=>{let o=new Set([...t$(e),...t]),r=Array.from(o);r.length>0&&e.attr("class",r.join(" "))},tT=(e,t)=>{let o=N(t$(e),e=>!t.has(e));e.attr("class",o.length>0?o.join(" "):null)},tC=e=>e.name===eY&&T(t$(e),e4),tw=e=>"div"===e.name&&T(t$(e),eG),tN=e=>{let t=e.children(),o,r,n=[];for(let l=0;l<t.length;l++){let a=t[l];"summary"===a.name&&m(o)?o=a:tw(a)&&m(r)?r=a:n.push(a)}return{summaryNode:o,wrapperNode:r,otherNodes:n}},tA=e=>{let t=new tv("br",1);t.attr("data-mce-bogus","1"),e.empty(),e.append(t)},tx=e=>{e.on("PreInit",()=>{let{serializer:t,parser:o}=e;o.addNodeFilter(eY,e=>{for(let t=0;t<e.length;t++){let o=e[t];if(tC(o)){let r=o,{summaryNode:n,wrapperNode:l,otherNodes:a}=tN(r),i=c(n),d=i?n:new tv("summary",1);m(d.firstChild)&&tA(d),tb(d,[e8]),i||(c(r.firstChild)?r.insert(d,r.firstChild,!0):r.append(d));let s=c(l),u=s?l:new tv("div",1);if(u.attr("data-mce-bogus","1"),tb(u,[eG]),a.length>0)for(let g=0;g<a.length;g++){let p=a[g];u.append(p)}if(m(u.firstChild)){let h=new tv("p",1);tA(h),u.append(h)}s||r.append(u)}}}),t.addNodeFilter(eY,e=>{let t=new Set([e8]);for(let o=0;o<e.length;o++){let r=e[o];if(tC(r)){let n=r,{summaryNode:l,wrapperNode:a}=tN(n);c(l)&&tT(l,t),c(a)&&a.unwrap()}}})})};var tS=tinymce.util.Tools.resolve("tinymce.util.VK");let t_=e=>{e.on("keydown",t=>{(!t.shiftKey&&t.keyCode===tS.ENTER&&eZ(e)||te(e))&&(t.preventDefault(),e.execCommand("ToggleAccordion"))})},tD=e=>{t_(e),e.on("ExecCommand",t=>{let o=t.command.toLowerCase();("delete"===o||"forwarddelete"===o)&&tr(e)&&tc(e)})};var tk=tinymce.util.Tools.resolve("tinymce.Env");let tE=e=>{tk.browser.isSafari()&&e.on("click",t=>{if(eQ(t.target)){let o=t.target,r=e.selection.getRng();r.collapsed&&r.startContainer===o.parentNode&&0===r.startOffset&&e.selection.setCursorLocation(o,0)}})},tM=e=>t=>{let o=()=>t.setEnabled(tt(e));return e.on("NodeChange",o),()=>e.off("NodeChange",o)},tP=e=>{let t=()=>e.execCommand("InsertAccordion");e.ui.registry.addButton("accordion",{icon:"accordion",tooltip:"Insert accordion",onSetup:tM(e),onAction:t}),e.ui.registry.addMenuItem("accordion",{icon:"accordion",text:"Accordion",onSetup:tM(e),onAction:t}),e.ui.registry.addToggleButton("accordiontoggle",{icon:"accordion-toggle",tooltip:"Toggle accordion",onAction:()=>e.execCommand("ToggleAccordion")}),e.ui.registry.addToggleButton("accordionremove",{icon:"remove",tooltip:"Delete accordion",onAction:()=>e.execCommand("RemoveAccordion")}),e.ui.registry.addContextToolbar("accordion",{predicate:t=>e.dom.is(t,"details")&&e.getBody().contains(t)&&e.dom.isEditable(t.parentNode),items:"accordiontoggle accordionremove",scope:"node",position:"node"})};o.add("accordion",e=>{tP(e),ty(e),tD(e),tx(e),tE(e)})}();
